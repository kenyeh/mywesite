{"filter":false,"title":"profile_model.php","tooltip":"/application/models/profile_model.php","undoManager":{"mark":12,"position":12,"stack":[[{"start":{"row":0,"column":0},"end":{"row":137,"column":2},"action":"insert","lines":["<?php","class Blog_model extends CI_Model","{","\tpublic function __construct()","\t{","\t\t$this->load->database();","\t}","\t","\tpublic function get_articles($page_data,$show_all)","\t{","\t\tif(!$show_all)","\t\t{","\t\t\t$this->db->where('bac_show', 1);","\t\t}","\t\t","\t\t$this->db->order_by(\"bac_created_time\", \"desc\")","\t\t->limit($page_data['per_page'], $page_data['start']);","\t\t","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->result_array();","\t}","\t","\tpublic function get_recent_articles($show_all)","\t{","\t\tif(!$show_all)","\t\t{","\t\t\t$this->db->where('bac_show', 1);","\t\t}","\t\t","\t\t$this->db","\t\t->select('bac_id, bac_created_time, bac_title,bac_banner')","\t\t->order_by(\"bac_created_time\", \"desc\")","\t\t->limit(10, 0);","\t\t","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->result_array();","\t}","\t","\tpublic function get_banner_archives()","\t{","\t\t$this->db->where('bac_show', 1);","\t\t$this->db->where('bac_ShowOnIndex', 1);","\t\t","\t\t$this->db","\t\t->select('bac_id, bac_title,bac_banner,bac_content')","\t\t->order_by(\"bac_created_time\", \"desc\");","\t\t","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->result_array();","\t}","\t","\tpublic function get_all_articles()","\t{","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->num_rows();","\t}","\t","\tpublic function get_id_article($id = FALSE)","\t{","\t\t","\t\tif($id === FALSE)","\t\t{","\t\t\treturn array();","\t\t}","","\t\t$query = $this->db->get_where('blog_archives',array('bac_id'=>$id));","\t\treturn $query->row_array();","\t}","\t","\t","\t","\t//流水號加密","\tpublic function ntk_encrypt($txt, $key='key') ","\t{ ","\t\t$chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";","\t\t$chars_len=strlen($chars)-1;","\t\t//$nh = rand(0,$chars_len);//隨機要素","\t\t$nh='26';","\t\t$ch = $chars[$nh]; ","\t\t$mdKey = md5($key.$ch); ","\t\t$mdKey = substr($mdKey,$nh%8, $nh%8+7); ","\t\t$txt = base64_encode($txt); ","\t\t$tmp = ''; ","\t\t$i=0;$j=0;$k = 0; ","\t\t","\t\tfor ($i=0; $i<strlen($txt); $i++)","\t\t{ ","\t\t\t$k = $k == strlen($mdKey) ? 0 : $k; ","\t\t\t$j = ($nh+strpos($chars,$txt[$i])+ord($mdKey[$k++]))%$chars_len; ","\t\t\t$tmp .= $chars[$j]; ","\t\t} ","\t\t","\t\treturn $ch.$tmp; ","\t} ","\t//流水號解密","\tpublic function ntk_decrypt($txt, $key='key') ","\t{ ","\t\t$chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"; ","\t\t$chars_len=strlen($chars)-1;","\t\t$ch = $txt[0]; ","\t\t$nh = strpos($chars,$ch); ","\t\t$mdKey = md5($key.$ch); ","\t\t$mdKey = substr($mdKey,$nh%8, $nh%8+7); ","\t\t$txt = substr($txt,1); ","\t\t$tmp = ''; ","\t\t$i=0;$j=0; $k = 0; ","\t\t","\t\tfor ($i=0; $i<strlen($txt); $i++)","\t\t{ ","\t\t\t$k = $k == strlen($mdKey) ? 0 : $k; ","\t\t\t$j = strpos($chars,$txt[$i])-$nh - ord($mdKey[$k++]); ","\t\t\twhile ($j<0) $j+=$chars_len; ","\t\t\t$tmp .= $chars[$j]; ","\t\t} ","\t\t","\t\treturn base64_decode($tmp); ","\t}","\t","\tpublic function show_first_part($Str)","\t{","\t\t$StaKey=\"<p>\";","\t\t$EndKey=\"</p>\";","","\t\t$StaPos = mb_strpos($Str, $StaKey);","\t\t$EndPos = mb_strpos($Str, $EndKey);","\t\t$StaLen = mb_strlen($StaKey);","\t\t$EndLen = mb_strlen($EndKey);","","\t\t$Catchstr = mb_substr($Str, $StaPos + $StaLen , ($EndPos - $StaPos - $EndLen)+1);","\t\t$OtherKeyA = mb_substr($Str, 0, $StaPos);","\t\t$OtherKeyB = mb_substr($Str, $EndPos + $EndLen);","\t\t","\t\treturn $StaKey.$Catchstr.$EndKey;","\t}","\t","\t","}","?>"],"id":1}],[{"start":{"row":8,"column":1},"end":{"row":133,"column":2},"action":"remove","lines":["public function get_articles($page_data,$show_all)","\t{","\t\tif(!$show_all)","\t\t{","\t\t\t$this->db->where('bac_show', 1);","\t\t}","\t\t","\t\t$this->db->order_by(\"bac_created_time\", \"desc\")","\t\t->limit($page_data['per_page'], $page_data['start']);","\t\t","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->result_array();","\t}","\t","\tpublic function get_recent_articles($show_all)","\t{","\t\tif(!$show_all)","\t\t{","\t\t\t$this->db->where('bac_show', 1);","\t\t}","\t\t","\t\t$this->db","\t\t->select('bac_id, bac_created_time, bac_title,bac_banner')","\t\t->order_by(\"bac_created_time\", \"desc\")","\t\t->limit(10, 0);","\t\t","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->result_array();","\t}","\t","\tpublic function get_banner_archives()","\t{","\t\t$this->db->where('bac_show', 1);","\t\t$this->db->where('bac_ShowOnIndex', 1);","\t\t","\t\t$this->db","\t\t->select('bac_id, bac_title,bac_banner,bac_content')","\t\t->order_by(\"bac_created_time\", \"desc\");","\t\t","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->result_array();","\t}","\t","\tpublic function get_all_articles()","\t{","\t\t$query=$this->db->get('blog_archives');","\t\treturn $query->num_rows();","\t}","\t","\tpublic function get_id_article($id = FALSE)","\t{","\t\t","\t\tif($id === FALSE)","\t\t{","\t\t\treturn array();","\t\t}","","\t\t$query = $this->db->get_where('blog_archives',array('bac_id'=>$id));","\t\treturn $query->row_array();","\t}","\t","\t","\t","\t//流水號加密","\tpublic function ntk_encrypt($txt, $key='key') ","\t{ ","\t\t$chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";","\t\t$chars_len=strlen($chars)-1;","\t\t//$nh = rand(0,$chars_len);//隨機要素","\t\t$nh='26';","\t\t$ch = $chars[$nh]; ","\t\t$mdKey = md5($key.$ch); ","\t\t$mdKey = substr($mdKey,$nh%8, $nh%8+7); ","\t\t$txt = base64_encode($txt); ","\t\t$tmp = ''; ","\t\t$i=0;$j=0;$k = 0; ","\t\t","\t\tfor ($i=0; $i<strlen($txt); $i++)","\t\t{ ","\t\t\t$k = $k == strlen($mdKey) ? 0 : $k; ","\t\t\t$j = ($nh+strpos($chars,$txt[$i])+ord($mdKey[$k++]))%$chars_len; ","\t\t\t$tmp .= $chars[$j]; ","\t\t} ","\t\t","\t\treturn $ch.$tmp; ","\t} ","\t//流水號解密","\tpublic function ntk_decrypt($txt, $key='key') ","\t{ ","\t\t$chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"; ","\t\t$chars_len=strlen($chars)-1;","\t\t$ch = $txt[0]; ","\t\t$nh = strpos($chars,$ch); ","\t\t$mdKey = md5($key.$ch); ","\t\t$mdKey = substr($mdKey,$nh%8, $nh%8+7); ","\t\t$txt = substr($txt,1); ","\t\t$tmp = ''; ","\t\t$i=0;$j=0; $k = 0; ","\t\t","\t\tfor ($i=0; $i<strlen($txt); $i++)","\t\t{ ","\t\t\t$k = $k == strlen($mdKey) ? 0 : $k; ","\t\t\t$j = strpos($chars,$txt[$i])-$nh - ord($mdKey[$k++]); ","\t\t\twhile ($j<0) $j+=$chars_len; ","\t\t\t$tmp .= $chars[$j]; ","\t\t} ","\t\t","\t\treturn base64_decode($tmp); ","\t}","\t","\tpublic function show_first_part($Str)","\t{","\t\t$StaKey=\"<p>\";","\t\t$EndKey=\"</p>\";","","\t\t$StaPos = mb_strpos($Str, $StaKey);","\t\t$EndPos = mb_strpos($Str, $EndKey);","\t\t$StaLen = mb_strlen($StaKey);","\t\t$EndLen = mb_strlen($EndKey);","","\t\t$Catchstr = mb_substr($Str, $StaPos + $StaLen , ($EndPos - $StaPos - $EndLen)+1);","\t\t$OtherKeyA = mb_substr($Str, 0, $StaPos);","\t\t$OtherKeyB = mb_substr($Str, $EndPos + $EndLen);","\t\t","\t\treturn $StaKey.$Catchstr.$EndKey;","\t}"],"id":2}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"remove","lines":["\t"],"id":3}],[{"start":{"row":7,"column":1},"end":{"row":8,"column":0},"action":"remove","lines":["",""],"id":4}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"remove","lines":["\t"],"id":5}],[{"start":{"row":6,"column":2},"end":{"row":7,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":1,"column":6},"end":{"row":1,"column":10},"action":"remove","lines":["Blog"],"id":7},{"start":{"row":1,"column":6},"end":{"row":1,"column":7},"action":"insert","lines":["P"]}],[{"start":{"row":1,"column":7},"end":{"row":1,"column":8},"action":"insert","lines":["r"],"id":9}],[{"start":{"row":1,"column":8},"end":{"row":1,"column":9},"action":"insert","lines":["o"],"id":10}],[{"start":{"row":1,"column":9},"end":{"row":1,"column":10},"action":"insert","lines":["f"],"id":11}],[{"start":{"row":1,"column":10},"end":{"row":1,"column":11},"action":"insert","lines":["i"],"id":12}],[{"start":{"row":1,"column":11},"end":{"row":1,"column":12},"action":"insert","lines":["l"],"id":13}],[{"start":{"row":1,"column":12},"end":{"row":1,"column":13},"action":"insert","lines":["e"],"id":14}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":6},"end":{"row":1,"column":19},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1440840382881,"hash":"f66fb602daa607ce885cab6b7f937f2ab616b90f"}